<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rifa Aleatoria</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 20px;
  }
  input {
    width: 60px;
    margin: 5px;
  }
  button {
    padding: 10px 20px;
    margin: 10px;
    font-size: 16px;
    cursor: pointer;
  }
  #resultado {
    font-size: 48px;
    margin: 20px 0;
    color: #d9534f;
  }
</style>
</head>
<body>

<h1>Rifa Aleatoria</h1>

<div>
  <label>Rango desde:</label>
  <input type="number" id="min" value="1">
  <label>hasta:</label>
  <input type="number" id="max" value="50">
</div>

<button onclick="generarNumero()">Sacar número</button>
<button onclick="resetear()">Resetear</button>

<div id="resultado">--</div>

<script>
  // Recuperar datos de localStorage
  let numerosUsados = JSON.parse(localStorage.getItem('numerosUsados')) || [];

  function generarNumero() {
    let min = parseInt(document.getElementById('min').value);
    let max = parseInt(document.getElementById('max').value);

    if (isNaN(min) || isNaN(max) || min > max) {
      alert('Por favor, ingresa un rango válido.');
      return;
    }

    // Generar lista completa de números
    let todos = [];
    for (let i = min; i <= max; i++) todos.push(i);

    // Filtrar los números ya usados
    let disponibles = todos.filter(n => !numerosUsados.includes(n));

    if (disponibles.length === 0) {
      alert('¡Se han agotado todos los números!');
      return;
    }

    // Elegir un número aleatorio disponible
    let indice = Math.floor(Math.random() * disponibles.length);
    let numero = disponibles[indice];

    numerosUsados.push(numero);
    localStorage.setItem('numerosUsados', JSON.stringify(numerosUsados));

    document.getElementById('resultado').textContent = numero;
  }

  function resetear() {
    if(confirm("¿Seguro que quieres resetear los números sorteados?")) {
      numerosUsados = [];
      localStorage.setItem('numerosUsados', JSON.stringify(numerosUsados));
      document.getElementById('resultado').textContent = '--';
    }
  }
</script>

</body>
</html>